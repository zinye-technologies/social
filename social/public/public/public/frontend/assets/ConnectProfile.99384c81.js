var u=(t,a,g)=>new Promise((P,m)=>{var r=i=>{try{l(g.next(i))}catch(f){m(f)}},y=i=>{try{l(g.throw(i))}catch(f){m(f)}},l=i=>i.done?P(i.value):Promise.resolve(i.value).then(r,y);l((g=g.apply(t,a)).next())});import{_ as S,ah as B,ai as D,aj as E,S as z,M as _,j as b,m as s,w as o,p as k,N as A,k as e,n as d,o as h,F as V,l as j,t as p,u as c,s as T}from"./vendor.56598cc7.js";const M={name:"ConnectProfile",data(){return{connectedProfiles:[],connectingPersonal:!1,connectingCompany:!1,testingConnection:null}},components:{UserIcon:B,BuildingOfficeIcon:D,CheckIcon:E,EllipsisVerticalIcon:z},resources:{connectedProfiles(){return _({url:"frappe.client.get_list",params:{doctype:"Social Profile",fields:["name","profile_name","platform","platform_type","is_active","creation","profile_url"],filters:{platform:"LinkedIn"},order_by:"creation desc"},auto:!0,onSuccess:t=>{this.connectedProfiles=t}})}},methods:{connectPersonalProfile(){return u(this,null,function*(){this.connectingPersonal=!0;try{const t=yield _({url:"social.linkedin.auth.start_oauth_flow"}).submit({profile_type:"personal"});window.location.href=t.authorization_url}catch(t){console.error("Error starting LinkedIn OAuth:",t)}finally{this.connectingPersonal=!1}})},connectCompanyPage(){return u(this,null,function*(){this.connectingCompany=!0;try{const t=yield _({url:"social.linkedin.auth.start_oauth_flow"}).submit({profile_type:"company"});window.location.href=t.authorization_url}catch(t){console.error("Error starting LinkedIn OAuth:",t)}finally{this.connectingCompany=!1}})},testConnection(t){return u(this,null,function*(){this.testingConnection=t.name;try{const a=yield _({url:"social.linkedin.publisher.test_linkedin_connection"}).submit({social_profile:t.name});a.success?frappe.toast({title:"Connection Successful",message:"LinkedIn connection is working properly",indicator:"green"}):frappe.toast({title:"Connection Failed",message:a.error,indicator:"red"})}catch(a){console.error("Error testing connection:",a),frappe.toast({title:"Test Failed",message:"Unable to test connection",indicator:"red"})}finally{this.testingConnection=null}})},editProfile(t){console.log("Edit profile:",t)},refreshToken(t){return u(this,null,function*(){try{frappe.toast({title:"Token Refreshed",message:"Access token has been refreshed successfully",indicator:"green"}),this.$resources.connectedProfiles.fetch()}catch(a){console.error("Error refreshing token:",a)}})},toggleProfile(t){return u(this,null,function*(){try{yield _({url:"frappe.client.set_value"}).submit({doctype:"Social Profile",name:t.name,fieldname:"is_active",value:t.is_active?0:1}),this.$resources.connectedProfiles.fetch(),frappe.toast({title:"Profile Updated",message:`Profile ${t.is_active?"deactivated":"activated"} successfully`,indicator:"green"})}catch(a){console.error("Error toggling profile:",a)}})},disconnectProfile(t){return u(this,null,function*(){if(confirm(`Are you sure you want to disconnect ${t.profile_name}?`))try{yield _({url:"frappe.client.delete"}).submit({doctype:"Social Profile",name:t.name}),this.$resources.connectedProfiles.fetch(),frappe.toast({title:"Profile Disconnected",message:"LinkedIn profile has been disconnected",indicator:"green"})}catch(a){console.error("Error disconnecting profile:",a)}})},formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}}},O={class:"p-6 max-w-4xl mx-auto"},U=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl font-bold text-gray-900 mb-2"},"Connect LinkedIn Profile"),e("p",{class:"text-gray-600"},"Connect your LinkedIn profile or company page to start posting content.")],-1),N=e("div",{class:"flex items-center mb-6"},[e("div",{class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})])]),e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"LinkedIn"),e("p",{class:"text-gray-600"},"Connect your LinkedIn profile to share professional content")])],-1),F={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$={class:"border border-gray-200 rounded-lg p-4"},H={class:"flex items-center mb-4"},R=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Personal Profile"),e("p",{class:"text-sm text-gray-600"},"Post as yourself on LinkedIn")],-1),q={class:"space-y-3"},G={class:"flex items-center text-sm text-gray-600"},J=c(" Post text, image, and link content "),K={class:"flex items-center text-sm text-gray-600"},Q=c(" Schedule posts for optimal timing "),W={class:"flex items-center text-sm text-gray-600"},X=c(" View basic analytics "),Y=c(" Connect Personal Profile "),Z={class:"border border-gray-200 rounded-lg p-4"},ee={class:"flex items-center mb-4"},te=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Company Page"),e("p",{class:"text-sm text-gray-600"},"Post on behalf of your company")],-1),se={class:"space-y-3"},ne={class:"flex items-center text-sm text-gray-600"},oe=c(" Post as your company "),ce={class:"flex items-center text-sm text-gray-600"},ae=c(" Access company page analytics "),ie={class:"flex items-center text-sm text-gray-600"},re=c(" Team collaboration features "),le=c(" Connect Company Page "),de=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Connected Profiles",-1),me={class:"space-y-4"},ue={class:"flex items-center"},fe={class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-4"},_e={class:"font-medium text-gray-900"},he={class:"text-sm text-gray-600"},ge={class:"text-xs text-gray-500"},pe={class:"flex items-center space-x-3"},ye=c(" Test Connection "),xe=c("Edit"),ve=c("Refresh Token"),Ce=c(" Disconnect "),be=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Setup Instructions",-1),ke=e("div",{class:"space-y-4"},[e("div",{class:"flex items-start"},[e("div",{class:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5"},[e("span",{class:"text-xs font-medium text-blue-600"},"1")]),e("div",null,[e("h4",{class:"font-medium text-gray-900"},"LinkedIn App Configuration"),e("p",{class:"text-sm text-gray-600"}," Make sure your administrator has configured the LinkedIn OAuth credentials in Social Settings. ")])]),e("div",{class:"flex items-start"},[e("div",{class:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5"},[e("span",{class:"text-xs font-medium text-blue-600"},"2")]),e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Choose Profile Type"),e("p",{class:"text-sm text-gray-600"}," Select whether you want to connect a personal profile or company page based on your posting needs. ")])]),e("div",{class:"flex items-start"},[e("div",{class:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5"},[e("span",{class:"text-xs font-medium text-blue-600"},"3")]),e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Authorize Access"),e("p",{class:"text-sm text-gray-600"}," Click the connect button and authorize the application to access your LinkedIn profile. ")])]),e("div",{class:"flex items-start"},[e("div",{class:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5"},[e("span",{class:"text-xs font-medium text-blue-600"},"4")]),e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Start Posting"),e("p",{class:"text-sm text-gray-600"}," Once connected, you can start creating and scheduling posts for your LinkedIn profile. ")])])],-1);function Pe(t,a,g,P,m,r){const y=d("UserIcon"),l=d("CheckIcon"),i=d("Button"),f=d("BuildingOfficeIcon"),C=d("Card"),w=d("Badge"),I=d("EllipsisVerticalIcon"),x=d("DropdownItem"),L=d("DropdownMenu");return h(),b("div",O,[U,s(C,{class:"p-6 mb-6"},{default:o(()=>[N,e("div",F,[e("div",$,[e("div",H,[s(y,{class:"w-8 h-8 text-gray-600 mr-3"}),R]),e("div",q,[e("div",G,[s(l,{class:"w-4 h-4 text-green-500 mr-2"}),J]),e("div",K,[s(l,{class:"w-4 h-4 text-green-500 mr-2"}),Q]),e("div",W,[s(l,{class:"w-4 h-4 text-green-500 mr-2"}),X])]),s(i,{variant:"solid",class:"w-full mt-4",loading:m.connectingPersonal,onClick:r.connectPersonalProfile},{default:o(()=>[Y]),_:1},8,["loading","onClick"])]),e("div",Z,[e("div",ee,[s(f,{class:"w-8 h-8 text-gray-600 mr-3"}),te]),e("div",se,[e("div",ne,[s(l,{class:"w-4 h-4 text-green-500 mr-2"}),oe]),e("div",ce,[s(l,{class:"w-4 h-4 text-green-500 mr-2"}),ae]),e("div",ie,[s(l,{class:"w-4 h-4 text-green-500 mr-2"}),re])]),s(i,{variant:"outline",class:"w-full mt-4",loading:m.connectingCompany,onClick:r.connectCompanyPage},{default:o(()=>[le]),_:1},8,["loading","onClick"])])])]),_:1}),m.connectedProfiles.length>0?(h(),k(C,{key:0,class:"p-6"},{default:o(()=>[de,e("div",me,[(h(!0),b(V,null,j(m.connectedProfiles,n=>(h(),b("div",{key:n.name,class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},[e("div",ue,[e("div",fe,[n.platform_type==="Personal Profile"?(h(),k(y,{key:0,class:"w-5 h-5 text-blue-600"})):(h(),k(f,{key:1,class:"w-5 h-5 text-blue-600"}))]),e("div",null,[e("h4",_e,p(n.profile_name),1),e("p",he,p(n.platform_type),1),e("p",ge," Connected "+p(r.formatDate(n.creation)),1)])]),e("div",pe,[s(w,{variant:n.is_active?"success":"secondary"},{default:o(()=>[c(p(n.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"]),s(i,{variant:"outline",size:"sm",loading:m.testingConnection===n.name,onClick:v=>r.testConnection(n)},{default:o(()=>[ye]),_:2},1032,["loading","onClick"]),s(L,null,{trigger:o(()=>[s(i,{variant:"ghost",size:"sm"},{default:o(()=>[s(I,{class:"w-4 h-4"})]),_:1})]),default:o(()=>[s(x,{onClick:v=>r.editProfile(n)},{default:o(()=>[xe]),_:2},1032,["onClick"]),s(x,{onClick:v=>r.refreshToken(n)},{default:o(()=>[ve]),_:2},1032,["onClick"]),s(x,{onClick:v=>r.toggleProfile(n),class:T(n.is_active?"text-orange-600":"text-green-600")},{default:o(()=>[c(p(n.is_active?"Deactivate":"Activate"),1)]),_:2},1032,["onClick","class"]),s(x,{onClick:v=>r.disconnectProfile(n),class:"text-red-600"},{default:o(()=>[Ce]),_:2},1032,["onClick"])]),_:2},1024)])]))),128))])]),_:1})):A("",!0),s(C,{class:"p-6 mt-6"},{default:o(()=>[be,ke]),_:1})])}var Le=S(M,[["render",Pe]]);export{Le as default};
